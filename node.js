var B=Object.create;var p=Object.defineProperty;var I=Object.getOwnPropertyDescriptor;var j=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty;var G=(e,t)=>{for(var n in t)p(e,n,{get:t[n],enumerable:!0})},h=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of j(t))!E.call(e,o)&&o!==n&&p(e,o,{get:()=>t[o],enumerable:!(s=I(t,o))||s.enumerable});return e};var m=(e,t,n)=>(n=e!=null?B(k(e)):{},h(t||!e||!e.__esModule?p(n,"default",{value:e,enumerable:!0}):n,e)),R=e=>h(p({},"__esModule",{value:!0}),e);var b={};G(b,{Get:()=>w,Set:()=>g});module.exports=R(b);var l=m(require("fs"),1),x=function(e){e=e.toString(),l.default.existsSync(e)||l.default.mkdirSync(e,{recursive:!0})},$=function(e,t){l.default.writeFileSync(e,t.toString())};var S=m(require("fs"),1);var v=function(e){e=e.replace(/(\/)$/,"");var t=[];return S.default.readdirSync(e).forEach(function(n){t.push(n)}),t},y=function(e){try{return S.default.readFileSync(e,"utf8")}catch(t){return}};var i=m(require("process"),1),g=function(e,t){if(!(i.default.env&&i.default.env.DB))throw new Error("process.env.DB is not defined");let n=Date.parse(new Date().toISOString());x(`${i.default.env.DB}/${e}/${n}/`);let o=Object.keys(t).map(function(c){return`${i.default.env.DB}/${e}/${n}/`+c}),a=Object.values(t);for(let c=0;c<o.length;c++)$(o[c],a[c])},w=function(e,t={},n=null){i.default.env&&i.default.env.DB;let s=Date.parse(new Date().toISOString()),o=n==null?0:Date.parse(new Date(s-864e5*n).toISOString());var a=null;try{a=v(`${i.default.env.DB}/${e}/`).filter(r=>+r>=o).map(r=>`${i.default.env.DB}/${e}/`+r+"/")}catch(r){return null}var c=Object.keys(t),F=Object.values(t),N=c.map(function(r,f){a=a.filter(function(u){return v(u).includes(r)}).filter(function(u){return y(u+r)==F[f]})});return a.map(function(r){var f=r.split("/"),u=f[f.length-2],O=new Date(parseInt(u)).toGMTString(),D={},L=v(r).map(d=>{D[d]=y(r+d)});return{time:O,data:D}}).reverse()};0&&(module.exports={Get,Set});
